version: '0.0.0_{build}'

branches:
  only:
    - master
    - build-system-trial

init:
  - C:\cygwin64\setup-x86_64.exe --quiet-mode --no-shortcuts --no-startmenu --no-desktop --upgrade-also --only-site --site http://cygwin.mirror.constant.com/ --root C:\cygwin64 --local-package-dir C:\cygwin64\var\cache\setup -P autoconf -P automake -P bison -P gcc-core -P gcc-g++ -P mingw-runtime -P mingw-binutils -P mingw-gcc-core -P mingw-gcc-g++ -P mingw-pthreads -P mingw-w32api -P libtool -P make -P python -P gettext-devel -P gettext -P intltool -P libiconv -P pkg-config -P git -P wget -P curl
install:
  - c:\cygwin64\bin\sh ./ci/install.sh
before_build:
  - c:\cygwin64\bin\sh ./ci/before_build.sh
build_script:
  - c:\cygwin64\bin\sh -lc "make -j4 all"

test_script:
  - c:\cygwin64\bin\sh -lc ".\test-exec -a"
